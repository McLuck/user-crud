(function(e){function t(t){for(var i,o,l=t[0],r=t[1],d=t[2],c=0,m=[];c<l.length;c++)o=l[c],s[o]&&m.push(s[o][0]),s[o]=0;for(i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i]);u&&u(t);while(m.length)m.shift()();return a.push.apply(a,d||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],i=!0,l=1;l<n.length;l++){var r=n[l];0!==s[r]&&(i=!1)}i&&(a.splice(t--,1),e=o(o.s=n[0]))}return e}var i={},s={app:0},a=[];function o(t){if(i[t])return i[t].exports;var n=i[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=i,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)o.d(n,i,function(t){return e[t]}.bind(null,i));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],r=l.push.bind(l);l.push=t,l=l.slice();for(var d=0;d<l.length;d++)t(l[d]);var u=r;a.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},1:function(e,t){},5410:function(e,t,n){"use strict";var i=n("c6b3"),s=n.n(i);s.a},"56d7":function(e,t,n){"use strict";n.r(t);n("cadf"),n("551c"),n("097d");var i,s,a=n("2b0e"),o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("md-toolbar",{staticClass:"md-primary"},[n("h3",{staticClass:"md-title"},[e._v("CRUD de usuário")])]),n("div",[e.selected?n("md-dialog",{attrs:{"md-active":e.showDialog},on:{"update:mdActive":function(t){e.showDialog=t}}},[n("md-dialog-title",[e._v("Cadastro de "+e._s(e.selected.name))]),n("md-card",{staticClass:"md-layout-item md-size-450 md-small-size-450"},[n("md-field",[n("label",[e._v("Nome do usuário")]),n("md-input",{model:{value:e.selected.name,callback:function(t){e.$set(e.selected,"name",t)},expression:"selected.name"}}),n("span",{staticClass:"md-helper-text"},[e._v("Este deve ser o nome completo do usuário")]),n("md-button",{staticClass:"md-icon-button",on:{click:function(t){e.saveUser()}}},[n("md-icon",[e._v("save")])],1)],1),n("div",[n("div",{staticClass:"md-layout"},[n("div",{staticClass:"md-layout-item"},[n("md-field",[n("label",[e._v("Email")]),n("md-input",{model:{value:e.inputEmail.address,callback:function(t){e.$set(e.inputEmail,"address",t)},expression:"inputEmail.address"}}),n("span",{staticClass:"md-helper-text"},[e._v("Digite um email válido")])],1)],1),n("div",{staticClass:"md-layout-item"},[n("md-field",[n("label",[e._v("Apelido")]),n("md-input",{model:{value:e.inputEmail.alias,callback:function(t){e.$set(e.inputEmail,"alias",t)},expression:"inputEmail.alias"}}),n("span",{staticClass:"md-helper-text"},[e._v("Crie um apelido pra este endereço")])],1)],1),n("md-button",{staticClass:"md-icon-button",on:{click:e.addEmail}},[n("md-icon",[e._v("add")])],1)],1),n("md-table",[n("md-table-row",[n("md-table-head",[e._v("apelido")]),n("md-table-head",[e._v("endereço")]),n("md-table-head",[e._v("ativado em")]),n("md-table-head",[e._v("último envio em")]),n("md-table-head",[e._v(" - ")])],1),e._l(e.selected.emails,function(t){return n("md-table-row",[n("md-table-cell",[e._v(e._s(t.alias))]),n("md-table-cell",[e._v(e._s(t.address))]),n("md-table-cell",[e._v(e._s(t.activationDate))]),n("md-table-cell",[e._v(e._s(t.lastSentValidationDate))]),n("md-table-cell",[n("md-button",{staticClass:"md-icon-button",on:{click:function(n){e.removeEmail(t)}}},[n("md-icon",[e._v("remove")])],1)],1)],1)})],2)],1),n("div",[n("div",{staticClass:"md-layout"},[n("div",{staticClass:"md-layout-item"},[n("md-field",[n("label",[e._v("Telefone")]),n("md-input",{model:{value:e.inputTelephone.number,callback:function(t){e.$set(e.inputTelephone,"number",t)},expression:"inputTelephone.number"}}),n("span",{staticClass:"md-helper-text"},[e._v("Informe o seu telefone")])],1)],1),n("md-button",{staticClass:"md-icon-button",on:{click:e.addTelephone}},[n("md-icon",[e._v("add")])],1)],1),n("md-table",[n("md-table-row",[n("md-table-head",[e._v("número")]),n("md-table-head",[e._v("cadastrado em")]),n("md-table-head",[e._v("último contato")]),n("md-table-head",[e._v(" - ")])],1),e._l(e.selected.telephones,function(t){return n("md-table-row",[n("md-table-cell",[e._v(e._s(t.number))]),n("md-table-cell",[e._v(e._s(t.insertionDate))]),n("md-table-cell",[e._v(e._s(t.lastContact))]),n("md-table-cell",[n("md-button",{staticClass:"md-icon-button",on:{click:function(n){e.removeTelephone(t)}}},[n("md-icon",[e._v("remove")])],1)],1)],1)})],2)],1)],1)],1):e._e(),n("md-table",{attrs:{"md-card":"","md-sort":"name","md-sort-order":"asc","md-card":"","md-fixed-header":""},on:{"md-selected":e.onSelect},scopedSlots:e._u([{key:"md-table-row",fn:function(t){var i=t.item;return n("md-table-row",{attrs:{"md-selectable":"single"}},[n("md-table-cell",{attrs:{"md-label":"ID","md-sort-by":"id","md-numeric":""}},[e._v(e._s(i.id))]),n("md-table-cell",{attrs:{"md-label":"Nome","md-sort-by":"name"}},[e._v(e._s(i.name))]),n("md-table-cell",{attrs:{"md-label":"Emails","md-sort-by":"email"}},[e._v(e._s(e.sintrgifyEmails(i.emails)))]),n("md-table-cell",{attrs:{"md-label":"Telefones","md-sort-by":"gender"}},[e._v(e._s(e.sintrgifyTelephones(i.telephones)))]),n("md-table-cell",{attrs:{"md-label":"Criado em","md-sort-by":"title"}},[e._v(e._s(i.insertionDate))]),n("md-table-cell",[n("md-button",{staticClass:"md-icon-button",attrs:{alt:"Editar",title:"Editar"},on:{click:function(t){e.editRegister(i)}}},[n("md-icon",[e._v("edit")])],1),n("md-button",{staticClass:"md-icon-button",attrs:{alt:"Apagar",title:"Apagar"},on:{click:function(t){e.removeRegister(i)}}},[n("md-icon",[e._v("remove")])],1),n("md-button",{staticClass:"md-icon-button",attrs:{alt:"Atividades do usuário",title:"Atividades do usuário"},on:{click:function(t){e.loadUserActivitys(i)}}},[n("md-icon",[e._v("timeline")])],1)],1)],1)}}]),model:{value:e.searched,callback:function(t){e.searched=t},expression:"searched"}},[n("md-table-toolbar",[n("div",{staticClass:"md-toolbar-section-start"},[n("h1",{staticClass:"md-title"},[e._v("Usuários")]),n("md-button",{staticClass:"md-primary md-raised",on:{click:e.newUser}},[e._v("Criar um novo usuário")])],1),n("md-field",{staticClass:"md-toolbar-section-end",attrs:{"md-clearable":""}},[n("md-input",{attrs:{placeholder:"Busque pelo nome..."},on:{input:e.searchOnTable},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1)],1),n("md-table-empty-state",{attrs:{"md-label":"Nenhum usuário encontrado","md-description":"Nenhum usuário encontrado com o nome '"+e.search+"'. Tente buscar usando outros parâmetros ou crie um novo usuário"}},[n("md-button",{staticClass:"md-primary md-raised",on:{click:e.newUser}},[e._v("Criar um novo usuário")])],1)],1)],1),n("div",[n("md-table",{attrs:{"md-sort":"insertionDate","md-sort-order":"desc","md-card":"","md-fixed-header":""},scopedSlots:e._u([{key:"md-table-row",fn:function(t){var i=t.item;return n("md-table-row",{},[n("md-table-cell",{attrs:{"md-label":"Data","md-sort-by":"insertionDate"}},[e._v(e._s(i.insertionDate))]),n("md-table-cell",{attrs:{"md-label":"Evento","md-sort-by":"operationDescription"}},[e._v(e._s(i.operationDescription))]),n("md-table-cell",{attrs:{"md-label":"Detalhes da requisição","md-sort-by":"originDetails"}},[e._v(e._s(i.originDetails))]),n("md-table-cell",{attrs:{"md-label":"Alteração"}},[n("ul",e._l(i.changes,function(t){return n("li",[e._v(e._s(t.attribute)+": "+e._s(t.oldValue)+" => "+e._s(t.newValue))])}))])],1)}}]),model:{value:e.activitys,callback:function(t){e.activitys=t},expression:"activitys"}},[n("md-table-toolbar",[n("h1",{staticClass:"md-title"},[e._v("Atividades do usuário")])])],1)],1)],1)},l=[],r=(n("ac6a"),n("386d"),n("7f7f"),n("6762"),n("2fdb"),n("6b54"),n("d4ec")),d=n("bee2"),u=function(){function e(t){Object(r["a"])(this,e),this._resource=t("user{/id}"),this._userActivityResource=t("user{/id}/activitys")}return Object(d["a"])(e,[{key:"findAll",value:function(){return this._resource.query().then(function(e){return e.json()})}},{key:"findAllActivitys",value:function(e){return this._userActivityResource.query({id:e.id}).then(function(e){return e.json()})}},{key:"save",value:function(e){return e.id?this._resource.update(e).then(function(e){return e.json()}):this._resource.save(e).then(function(e){return e.json()})}},{key:"remove",value:function(e){return this._resource.delete({id:e.id}).then(function(e){return e})}}]),e}(),c=function(){function e(t){Object(r["a"])(this,e),this._userResource=t("user{/idUser}/telephone{/idTelephone}"),this._resource=t("telephone{/id}")}return Object(d["a"])(e,[{key:"findAll",value:function(e){return this._userResource.query({idUser:e.id}).then(function(e){return e.json()})}},{key:"save",value:function(e){return this._resource.save(e).then(function(e){return e.json()})}},{key:"remove",value:function(e){return this._resource.delete({id:e.id}).then(function(e){return e})}}]),e}(),m=function(e){return e.toString().toLowerCase()},h=function(e,t){return t?e.filter(function(e){return m(e.name).includes(m(t))}):e},f={name:"TableSearch",data:function(){return{inputEmail:{alias:"",address:""},inputTelephone:{number:""},inputAthentication:{authenticationId:"",authenticationKey:"",type:{code:"EMAIL_PWD"}},search:null,selected:{},showDialog:!1,searched:[],users:[],activitys:[]}},created:function(){var e=this;s=new c(this.$resource),i=new u(this.$resource),i.findAll().then(function(t){e.users=t,e.searched=e.users},function(e){return console.log(e)})},methods:{loadList:function(){var e=this;i.findAll().then(function(t){e.users=t,e.searched=e.users},function(e){return console.log(e)})},newUser:function(){this.selected={name:"",emails:[],telephones:[],authentications:[]},this.activitys=[],this.showDialog=!0},searchOnTable:function(){this.searched=h(this.users,this.search)},onSelect:function(e){e&&(this.selected=e)},sintrgifyEmails:function(e){var t="";return e&&e.forEach(function(e){t=t+" "+e.address}),t},sintrgifyTelephones:function(e){var t="";return e&&e.forEach(function(e){t=t+" "+e.number}),t},addEmail:function(){var e=this;if(this.inputEmail&&this.inputEmail.address){var t=this.selected.emails.filter(function(t){return t.address===e.inputEmail.address});t.length||this.selected.emails.push(this.inputEmail),this.inputEmail={alias:"",address:""}}},removeEmail:function(e){this.selected&&(this.selected.emails=this.selected.emails.filter(function(t){return t.address!==e.address}))},addTelephone:function(){var e=this;if(this.selected&&this.inputTelephone&&this.inputTelephone.number){var t=this.selected.telephones.filter(function(t){return t.number===e.inputTelephone.number});t.length||(this.inputTelephone.user={id:this.selected.id},s.save(this.inputTelephone).then(function(t){e.selected.telephones.push(t),e.inputTelephone={alias:"",number:""}},function(e){return console.log(e)}))}},removeTelephone:function(e){var t=this;this.selected&&(s.remove(e).then(function(n){t.selected.telephones=t.selected.telephones.filter(function(t){return t.number!==e.number})},function(e){return console.log(e)}),this.selected.telephones=this.selected.telephones.filter(function(t){return t.number!==e.number}))},saveUser:function(){var e=this;this.selected&&this.selected.name&&i.save(this.selected).then(function(t){return e.loadList()},function(e){return console.log(e)})},editRegister:function(e){this.selected=e,this.showDialog=!0},loadUserActivitys:function(e){var t=this;this.selected=e,i.findAllActivitys(e).then(function(e){t.activitys=e},function(e){return console.log(e)})},removeRegister:function(e){var t=this;i.remove(e).then(function(e){return t.loadList()},function(e){return console.log(e)})}}},v=f,p=(n("5410"),n("2877")),b=Object(p["a"])(v,o,l,!1,null,"6708952d",null);b.options.__file="App2.vue";var _=b.exports,y=n("43f9"),g=n.n(y),C=(n("51de"),n("e094"),n("28dd"));n.d(t,"app",function(){return w}),a["default"].use(C["a"]),a["default"].use(g.a),a["default"].config.productionTip=!1,a["default"].http.options.root="http://localhost:9000",a["default"].http.headers.common["Access-Control-Allow-Origin"]="*";var w=new a["default"]({render:function(e){return e(_)}}).$mount("#app")},c6b3:function(e,t,n){}});
//# sourceMappingURL=app.6d9398cf.js.map